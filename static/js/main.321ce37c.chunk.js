(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{20:function(e,t,a){e.exports=a.p+"static/media/logo.2b1f7ee5.svg"},24:function(e,t,a){e.exports=a.p+"static/media/Error.f10ac534.svg"},25:function(e,t,a){e.exports=a.p+"static/media/check-mark.e38b395c.svg"},28:function(e,t,a){e.exports=a(39)},33:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(19),c=a.n(o),l=(a(33),a(26)),s=a(8),i=a(1),u=a(20),m=a.n(u),p=a(2),_=a(7),d=r.a.createContext();var f=function(e){var t=e.signOut,a=e.handleMenu,n=e.handleButtonMenu,o=e.isButtonMenuActive,c=r.a.useContext(d);return r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",src:m.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0430\u0439\u0442\u0430 \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f."}),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/sign-up"},r.a.createElement("ul",{className:"header__nav"},r.a.createElement("li",null,r.a.createElement(_.b,{to:"/sign-in",className:"header__link"},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement(p.b,{path:"/sign-in"},r.a.createElement("ul",{className:"header__nav"},r.a.createElement("li",null,r.a.createElement(_.b,{to:"/sign-up",className:"header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))),r.a.createElement(p.b,{path:"/"},r.a.createElement("ul",{className:"header__nav header__nav_media-hidden"},r.a.createElement("li",null,r.a.createElement("p",{className:"header__user-info"},c&&c.email)),r.a.createElement("li",null,r.a.createElement("button",{onClick:t,className:"header__link header__button"},"\u0412\u044b\u0439\u0442\u0438"))),r.a.createElement("div",{className:"header__burger-button ".concat(o&&"header__burger-button_active"),onClick:function(){n(),a()}},r.a.createElement("span",{className:"header__burger-button-span ".concat(o&&"header__burger-button-span_active")})))))};var h=function(e){var t=e.onCardClick,a=e.onCardLike,n=e.onCardDelete,o=e.link,c=e.name,l=e._id,s=e.likes,i=e.owner,u=e.userId,m=s.some((function(e){return e._id===u})),p=i._id===u;return r.a.createElement("article",{className:"card"},p&&r.a.createElement("button",{className:"card__button-delete",type:"button",onClick:function(){n(l)},"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),r.a.createElement("img",{className:"card__img",alt:c,src:o,onClick:function(){t(c,o)}}),r.a.createElement("div",{className:"card__info"},r.a.createElement("h2",{className:"card__title"},c),r.a.createElement("div",{className:"card__likes"},r.a.createElement("button",{className:"card__button-like ".concat(m&&"card__button-like_active"),type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",onClick:function(){a(l,s)}}),r.a.createElement("div",{className:"card__num-likes"},s.length))))};var b=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,o=e.onCardClick,c=e.initialCards,l=e.onCardLike,s=e.onCardDelete,i=r.a.useContext(d);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("button",{className:"profile__avatar-button",onClick:n},r.a.createElement("img",{className:"profile__avatar",alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",src:i&&i.avatar})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__name"},i&&i.name),r.a.createElement("button",{className:"profile__edit-button button",type:"button","aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",onClick:t}),r.a.createElement("p",{className:"profile__job"},i&&i.about)),r.a.createElement("button",{className:"profile__add-button button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:a})),r.a.createElement("section",{className:"cards"},c&&c.map((function(e){return r.a.createElement(h,Object.assign({key:e._id,onCardClick:o,onCardLike:l,onCardDelete:s},e,{userId:i._id}))})))))};var E=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa92020 Mesto Russia"))};var v=function(e){var t=e.card,a=e.onClose,n=e.isOpen,o=e.closeByEscAndOverlay;return r.a.useEffect((function(){o()})),r.a.createElement("div",{className:"popup popup_photo ".concat(n&&"popup_open")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close-button button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a}),r.a.createElement("img",{className:"popup__img",alt:t.name,src:t.link}),r.a.createElement("p",{className:"popup__photo-title"},t.name)))};var g=function(e){var t=e.name,a=e.title,n=e.children,o=e.onClose,c=e.isOpen,l=e.onSubmit,s=e.closeByEscAndOverlay;return r.a.useEffect((function(){s()})),r.a.createElement("div",{className:"popup popup_form ".concat(c&&"popup_open")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close-button button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:o}),r.a.createElement("form",{noValidate:!0,className:"form form_type_light",name:t,method:"get",action:"#",onSubmit:l},r.a.createElement("h2",{className:"form__title form__title_type_dark form__title_position_left"},a),n)))},y=a(12);function k(){var e=r.a.useState({}),t=Object(i.a)(e,2),a=t[0],o=t[1],c=r.a.useState({}),l=Object(i.a)(c,2),u=l[0],m=l[1],p=r.a.useState(!1),_=Object(i.a)(p,2),d=_[0],f=_[1],h=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e),m(t),f(a)}),[o,m,f]);return{values:a,handleChange:function(e){var t=e.target,n=t.name,r=t.value;o(Object(s.a)(Object(s.a)({},a),{},Object(y.a)({},n,r))),m(Object(s.a)(Object(s.a)({},u),{},Object(y.a)({},n,t.validationMessage))),f(t.closest("form").checkValidity())},errors:u,isValid:d,resetForm:h}}var N=function(e){var t=e.onClose,a=e.isOpen,n=e.onUpdateUser,o=e.closeByEscAndOverlay,c=r.a.useContext(d),l=k(),s=l.values,i=l.handleChange,u=l.errors,m=l.isValid,p=l.resetForm;return r.a.useEffect((function(){c&&p(c)}),[c,t,p]),r.a.createElement(g,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClose:t,isOpen:a,onSubmit:function(e){e.preventDefault(),n({name:s.name,about:s.about})},closeByEscAndOverlay:o},r.a.createElement("input",{value:s.name||"",onChange:i,type:"text",name:"name",className:"form__input form__input_type_dark",id:"name-input",placeholder:"\u0424\u0418\u041e",minLength:"2",maxLength:"40",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"name-input-error"},u.name||""),r.a.createElement("input",{value:s.about||"",onChange:i,type:"text",name:"about",className:"form__input form__input_type_dark",id:"job-input",placeholder:"\u041e \u0441\u0435\u0431\u0435",minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"job-input-error"},u.about||""),r.a.createElement("button",{className:"form__button form__button_type_dark ".concat(!m&&"form__button_type_dark_inactive"),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",disabled:!m},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var O=function(e){var t=e.onClose,a=e.isOpen,n=e.onUpdateAvatar,o=e.closeByEscAndOverlay,c=k(),l=c.values,s=c.handleChange,i=c.errors,u=c.isValid,m=c.resetForm;return r.a.useEffect((function(){m()}),[t,m,a]),r.a.createElement(g,{name:"edit-avatar",title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",onClose:t,isOpen:a,onSubmit:function(e){e.preventDefault(),n({avatar:l.avatar})},closeByEscAndOverlay:o},r.a.createElement("input",{value:l.avatar||"",onChange:s,type:"url",name:"avatar",className:"form__input form__input_type_dark",id:"avatar-input",placeholder:"https://...",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"avatar-input-error"},i.avatar||""),r.a.createElement("button",{className:"form__button form__button_type_dark ".concat(!u&&"form__button_type_dark_inactive"),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",disabled:!u},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var C=function(e){var t=e.onClose,a=e.isOpen,n=e.onAddPlace,o=e.closeByEscAndOverlay,c=k(),l=c.values,s=c.handleChange,i=c.errors,u=c.isValid,m=c.resetForm;return r.a.useEffect((function(){m()}),[a,m]),r.a.createElement(g,{name:"place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",onClose:t,isOpen:a,onSubmit:function(e){e.preventDefault(),n({name:l.name,link:l.link})},closeByEscAndOverlay:o},r.a.createElement("input",{value:l.name||"",onChange:s,type:"text",name:"name",className:"form__input form__input_type_dark",id:"title-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"title-input-error"},i.name||""),r.a.createElement("input",{value:l.link||"",onChange:s,type:"url",name:"link",className:"form__input form__input_type_dark",id:"img-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"img-input-error"},i.link),r.a.createElement("button",{className:"form__button form__button_type_dark ".concat(!u&&"form__button_type_dark_inactive"),type:"submit","aria-label":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",disabled:!u},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))};var j=function(e){var t=e.onClose,a=e.isOpen,n=e.onSubmit,o=e.closeByEscAndOverlay,c=r.a.useRef();return r.a.useEffect((function(){c.current.focus()})),r.a.createElement(g,{name:"delete-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430",closeByEscAndOverlay:o,onClose:t,isOpen:a,onSubmit:n},r.a.createElement("button",{className:"form__button form__button_type_dark",type:"submit","aria-label":"\u0414\u0430",ref:c},"\u0414\u0430"))},S=a(22),I=a(23),A=new(function(){function e(t){Object(S.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(I.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"register",value:function(e,t){return fetch("".concat(this._baseUrl,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:e})}).then(this._handleResponse)}},{key:"authorize",value:function(e,t){return fetch("".concat(this._baseUrl,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:e})}).then(this._handleResponse)}},{key:"getContent",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(this._handleResponse)}},{key:"editProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"editAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"createCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(this._handleResponse)}},{key:"putLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(this._handleResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then(this._handleResponse)}}]),e}())({baseUrl:"https://api.vk-dev.students.nomoreparties.space",headers:{Accept:"application/json","Content-Type":"application/json"}});var B=function(e){var t=e.setIsLoggedIn,a=e.setIsInfoTooltipOpen,n=e.setHasRegistartionError,o=r.a.useState(""),c=Object(i.a)(o,2),l=c[0],s=c[1],u=Object(p.g)(),m=k(),d=m.values,f=m.handleChange,h=m.errors,b=m.isValid,E=m.resetForm;function v(){A.authorize(d.email,d.password).then((function(e){return e.token?(localStorage.setItem("token",e.token),e):void localStorage.removeItem("token")})).then((function(e){e.token?(s(""),t(!0),u.push("/")):(s("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"),a(!0),n(!0))})).catch((function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430!"),a(!0),n(!0),400===e&&s("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),401===e&&s("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 email")}))}return r.a.useEffect((function(){E()}),[E]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"login-page"},r.a.createElement("form",{className:"form form_type_dark form_type_full-page",onSubmit:function(e){e.preventDefault(),A.register(d.email,d.password).then((function(e){400!==e.statusCode?(s(""),a(!0),n(!1),setTimeout(v,1500)):(a(!0),n(!0),s("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"))})).catch((function(e){s("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),a(!0),n(!0)}))},noValidate:!0},r.a.createElement("h1",{className:"form__title form__title_type_light form__title_position_center"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",{className:"form__error"},l),r.a.createElement("input",{value:d.email||"",onChange:f,type:"email",name:"email",className:"form__input form__input_type_light",placeholder:"Email",required:!0}),r.a.createElement("span",{className:"form__span-error"},h.email||""),r.a.createElement("input",{value:d.password||"",onChange:f,type:"password",name:"password",minLength:"5",maxLength:"12",className:"form__input form__input_type_light",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0}),r.a.createElement("span",{className:"form__span-error"},h.password||""),r.a.createElement("button",{className:"form__button form__button_type_light form__button_type_login ".concat(!b&&"form__button_type_light_inactive"),type:"submit","aria-label":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",disabled:!b},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement("p",{className:"form__question"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",r.a.createElement(_.b,{to:"/sign-in",className:"form__link"},"\u0412\u043e\u0439\u0442\u0438")))))};var L=function(e){var t=e.setIsLoggedIn,a=r.a.useState(""),n=Object(i.a)(a,2),o=n[0],c=n[1],l=k(),s=l.values,u=l.handleChange,m=l.errors,d=l.isValid,f=l.resetForm;r.a.useEffect((function(){f()}),[f]);var h=Object(p.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"login-page"},r.a.createElement("form",{className:"form form_type_dark form_type_full-page",onSubmit:function(e){e.preventDefault(),A.authorize(s.email,s.password).then((function(e){return e.token?(localStorage.setItem("token",e.token),e):void localStorage.removeItem("token")})).then((function(e){e.token?(c(""),t(!0),h.push("/")):c("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!")})).catch((function(e){400===e&&c("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),401===e&&c("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 email")}))},noValidate:!0},r.a.createElement("h1",{className:"form__title form__title_type_light form__title_position_center"},"\u0412\u0445\u043e\u0434"),r.a.createElement("p",{className:"form__error"},o),r.a.createElement("input",{value:s.email||"",onChange:u,type:"email",name:"email",className:"form__input form__input_type_light",placeholder:"Email",required:!0}),r.a.createElement("span",{className:"form__span-error"},m.email||""),r.a.createElement("input",{value:s.password||"",onChange:u,minLength:"5",maxLength:"12",type:"password",name:"password",className:"form__input form__input_type_light",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0}),r.a.createElement("span",{className:"form__span-error"},m.password||""),r.a.createElement("button",{className:"form__button form__button_type_light form__button_type_login ".concat(!d&&"form__button_type_light_inactive"),type:"submit","aria-label":"\u0412\u043e\u0439\u0442\u0438",disabled:!d},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("p",{className:"form__question"},"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",r.a.createElement(_.b,{to:"/sign-up",className:"form__link"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))},T=a(24),U=a.n(T),w=a(25),x=a.n(w);var P=function(e){var t=e.onClose,a=e.isOpen,n=e.closeByEscAndOverlay,o=e.hasError;return r.a.useEffect((function(){n()})),r.a.createElement("div",{className:"popup popup_form ".concat(a&&"popup_open")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close-button popup__close-button_position_center button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:t}),r.a.createElement("div",{className:"popup__content"},o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"popup__icon",src:U.a,alt:"\u041e\u0448\u0438\u0431\u043a\u0430"}),r.a.createElement("p",{className:"popup__message"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"popup__icon",src:x.a,alt:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"}),r.a.createElement("p",{className:"popup__message"},"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")))))};var R=function(e){var t=e.signOut,a=e.isOpen,n=e.loggedIn,o=r.a.useContext(d);return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("header",{className:"menu ".concat(a?"menu_active":"menu_inactive")},r.a.createElement("ul",{className:"menu__container"},r.a.createElement("li",null,r.a.createElement("h1",{className:"menu__user-info"},o&&o.email)),r.a.createElement("li",null,r.a.createElement("button",{onClick:t,className:"menu__link"},"\u0412\u044b\u0439\u0442\u0438")))))},D=a(27),F=function(e){var t=e.component,a=Object(D.a)(e,["component"]);return r.a.createElement(p.b,null,a.loggedIn?r.a.createElement(t,a):r.a.createElement(p.a,{to:"./sign-up"}))};var q=function(){var e=Object(p.h)(),t=r.a.useState(null),a=Object(i.a)(t,2),n=a[0],o=a[1],c=r.a.useState(null),u=Object(i.a)(c,2),m=u[0],_=u[1],h=r.a.useState(!1),g=Object(i.a)(h,2),y=g[0],k=g[1],S=r.a.useState(!1),I=Object(i.a)(S,2),T=I[0],U=I[1],w=r.a.useState(!1),x=Object(i.a)(w,2),D=x[0],q=x[1],z=r.a.useState(!1),V=Object(i.a)(z,2),M=V[0],J=V[1],H=r.a.useState(!1),G=Object(i.a)(H,2),K=G[0],Q=G[1],W=r.a.useState(!1),X=Object(i.a)(W,2),Y=X[0],Z=X[1],$=r.a.useState(!1),ee=Object(i.a)($,2),te=ee[0],ae=ee[1],ne=r.a.useState(!1),re=Object(i.a)(ne,2),oe=re[0],ce=re[1],le=r.a.useState(!1),se=Object(i.a)(le,2),ie=se[0],ue=se[1],me=r.a.useState({}),pe=Object(i.a)(me,2),_e=pe[0],de=pe[1],fe=r.a.useState({}),he=Object(i.a)(fe,2),be=he[0],Ee=he[1],ve=r.a.useState(!1),ge=Object(i.a)(ve,2),ye=ge[0],ke=ge[1],Ne=Object(p.g)();function Oe(){k(!1),U(!1),q(!1),J(!1),Q(!1),Z(!1)}function Ce(){localStorage.removeItem("token"),ke(!1),ae(!1),ce(!1),Ne.push("/sign-in")}function je(){function e(e){"Escape"===e.key&&Oe()}function t(e){e.target.classList.contains("popup_open")&&Oe()}return document.addEventListener("click",t),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}}return r.a.useEffect((function(){localStorage.getItem("token")&&Promise.all([A.getContent(),A.getInitialCards()]).then((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];a&&(o(a),_(n.data),ke(!0),Ne.push("/"))})).catch((function(e){400===e&&console.error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"),401===e&&console.error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")}))}),[e.pathname]),r.a.createElement(d.Provider,{value:n},r.a.createElement("div",{className:"page"},r.a.createElement(R,{signOut:Ce,isOpen:te,loggedIn:ye}),r.a.createElement(f,{signOut:Ce,handleMenu:function(){ae(!te)},handleButtonMenu:function(){ce(!oe)},isButtonMenuActive:oe}),r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/sign-up"},r.a.createElement(B,{setIsLoggedIn:ke,setIsInfoTooltipOpen:Z,setHasRegistartionError:ue})),r.a.createElement(p.b,{path:"/sign-in"},r.a.createElement(L,{setIsLoggedIn:ke})),r.a.createElement(F,{path:"/",loggedIn:ye,component:b,onEditAvatar:function(){q(!0)},onEditProfile:function(){k(!0)},onAddPlace:function(){U(!0)},onCardClick:function(e,t){de({name:e,link:t}),J(!0)},initialCards:m,onCardLike:function(e,t){function a(t){var a=m.map((function(a){return a._id===e?t:a}));_(a)}t.some((function(e){return e._id===n._id}))?A.deleteLike(e).then((function(e){a(e.data)})).catch((function(e){return console.error("\u041f\u0440\u0438 \u043b\u0430\u0439\u043a\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})):A.putLike(e).then((function(e){a(e.data)})).catch((function(e){return console.error("\u041f\u0440\u0438 \u043b\u0430\u0439\u043a\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},onCardDelete:function(e){Ee({id:e}),Q(!0)}}),r.a.createElement(p.b,null,ye?r.a.createElement(p.a,{to:"/"}):r.a.createElement(p.a,{to:"/sign-up"}))),n&&r.a.createElement(N,{isOpen:y,onClose:Oe,onUpdateUser:function(e){A.editProfile(e).then((function(e){o(Object(s.a)(Object(s.a)({},n),{},{name:e.name,about:e.about})),Oe()})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},closeByEscAndOverlay:je}),n&&r.a.createElement(O,{isOpen:D,onClose:Oe,onUpdateAvatar:function(e){A.editAvatar(e).then((function(e){o(Object(s.a)(Object(s.a)({},n),{},{avatar:e.avatar})),Oe()})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},closeByEscAndOverlay:je}),r.a.createElement(C,{isOpen:T,onClose:Oe,onAddPlace:function(e){A.createCard(e).then((function(e){console.log(e),_([e.data].concat(Object(l.a)(m)))})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})),Oe()},closeByEscAndOverlay:je}),r.a.createElement(v,{card:_e,onClose:Oe,isOpen:M,closeByEscAndOverlay:je}),r.a.createElement(j,{closeByEscAndOverlay:je,onClose:Oe,isOpen:K,onSubmit:function(e){e.preventDefault(),A.deleteCard(be.id).then((function(){var e=m.filter((function(e){return e._id!==be.id}));_(e),Oe()})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),r.a.createElement(P,{onClose:Oe,isOpen:Y,closeByEscAndOverlay:je,hasError:ie}),r.a.createElement(E,null)))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(_.a,{basename:"/react-mesto-auth"},r.a.createElement(q,null))),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.321ce37c.chunk.js.map