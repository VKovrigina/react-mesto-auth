(this["webpackJsonpmesto-react-auth"]=this["webpackJsonpmesto-react-auth"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/logo.2b1f7ee5.svg"},24:function(e,t,a){e.exports=a.p+"static/media/Error.f10ac534.svg"},25:function(e,t,a){e.exports=a.p+"static/media/check-mark.e38b395c.svg"},28:function(e,t,a){e.exports=a(39)},33:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(21),c=a.n(o),s=(a(33),a(26)),l=a(8),i=a(1),u=a(22),m=a.n(u),_=a(2),p=a(7),d=r.a.createContext();var f=function(e){var t=e.signOut,a=e.handleMenu,n=e.handleButtonMenu,o=e.isButtonMenuActive,c=r.a.useContext(d);return r.a.createElement("header",{className:"header"},r.a.createElement("img",{className:"header__logo",src:m.a,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u0441\u0430\u0439\u0442\u0430 \u041c\u0435\u0441\u0442\u043e \u0420\u043e\u0441\u0441\u0438\u044f."}),r.a.createElement(_.d,null,r.a.createElement(_.b,{path:"/sign-up"},r.a.createElement("ul",{className:"header__nav"},r.a.createElement("li",null,r.a.createElement(p.b,{to:"/sign-in",className:"header__link"},"\u0412\u043e\u0439\u0442\u0438")))),r.a.createElement(_.b,{path:"/sign-in"},r.a.createElement("ul",{className:"header__nav"},r.a.createElement("li",null,r.a.createElement(p.b,{to:"/sign-up",className:"header__link"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")))),r.a.createElement(_.b,{path:"/"},r.a.createElement("ul",{className:"header__nav header__nav_media-hidden"},r.a.createElement("li",null,r.a.createElement("p",{className:"header__user-info"},c&&c)),r.a.createElement("li",null,r.a.createElement("button",{onClick:t,className:"header__link header__button"},"\u0412\u044b\u0439\u0442\u0438"))),r.a.createElement("div",{className:"header__burger-button ".concat(o&&"header__burger-button_active"),onClick:function(){n(),a()}},r.a.createElement("span",{className:"header__burger-button-span ".concat(o&&"header__burger-button-span_active")})))))};var h=function(e){var t=e.onCardClick,a=e.onCardLike,n=e.onCardDelete,o=e.link,c=e.name,s=e._id,l=e.likes,i=e.owner,u=e.userId,m=l.some((function(e){return e._id===u})),_=i._id===u;return r.a.createElement("article",{className:"card"},_&&r.a.createElement("button",{className:"card__button-delete",type:"button",onClick:function(){n(s)},"aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),r.a.createElement("img",{className:"card__img",alt:c,src:o,onClick:function(){t(c,o)}}),r.a.createElement("div",{className:"card__info"},r.a.createElement("h2",{className:"card__title"},c),r.a.createElement("div",{className:"card__likes"},r.a.createElement("button",{className:"card__button-like ".concat(m&&"card__button-like_active"),type:"button","aria-label":"\u041d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",onClick:function(){a(s,l)}}),r.a.createElement("div",{className:"card__num-likes"},l.length))))},b=r.a.createContext();var E=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,o=e.onCardClick,c=e.initialCards,s=e.onCardLike,l=e.onCardDelete,i=r.a.useContext(b);return r.a.createElement(r.a.Fragment,null,r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("button",{className:"profile__avatar-button",onClick:n},r.a.createElement("img",{className:"profile__avatar",alt:"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",src:i&&i.avatar})),r.a.createElement("div",{className:"profile__info"},r.a.createElement("h1",{className:"profile__name"},i&&i.name),r.a.createElement("button",{className:"profile__edit-button button",type:"button","aria-label":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",onClick:t}),r.a.createElement("p",{className:"profile__job"},i&&i.about)),r.a.createElement("button",{className:"profile__add-button button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c",onClick:a})),r.a.createElement("section",{className:"cards"},c&&c.map((function(e){return r.a.createElement(h,Object.assign({key:e._id,onCardClick:o,onCardLike:s,onCardDelete:l},e,{userId:i._id}))})))))};var v=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa92020 Mesto Russia"))};var g=function(e){var t=e.card,a=e.onClose,n=e.isOpen,o=e.closeByEscAndOverlay;return r.a.useEffect((function(){o()})),r.a.createElement("div",{className:"popup popup_photo ".concat(n&&"popup_open")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close-button button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:a}),r.a.createElement("img",{className:"popup__img",alt:t.name,src:t.link}),r.a.createElement("p",{className:"popup__photo-title"},t.name)))};var y=function(e){var t=e.name,a=e.title,n=e.children,o=e.onClose,c=e.isOpen,s=e.onSubmit,l=e.closeByEscAndOverlay;return r.a.useEffect((function(){l()})),r.a.createElement("div",{className:"popup popup_form ".concat(c&&"popup_open")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close-button button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:o}),r.a.createElement("form",{noValidate:!0,className:"form form_type_light",name:t,method:"get",action:"#",onSubmit:s},r.a.createElement("h2",{className:"form__title form__title_type_dark form__title_position_left"},a),n)))},k=a(12);function N(){var e=r.a.useState({}),t=Object(i.a)(e,2),a=t[0],o=t[1],c=r.a.useState({}),s=Object(i.a)(c,2),u=s[0],m=s[1],_=r.a.useState(!1),p=Object(i.a)(_,2),d=p[0],f=p[1],h=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e),m(t),f(a)}),[o,m,f]);return{values:a,handleChange:function(e){var t=e.target,n=t.name,r=t.value;o(Object(l.a)(Object(l.a)({},a),{},Object(k.a)({},n,r))),m(Object(l.a)(Object(l.a)({},u),{},Object(k.a)({},n,t.validationMessage))),f(t.closest("form").checkValidity())},errors:u,isValid:d,resetForm:h}}var O=function(e){var t=e.onClose,a=e.isOpen,n=e.onUpdateUser,o=e.closeByEscAndOverlay,c=r.a.useContext(b),s=N(),l=s.values,i=s.handleChange,u=s.errors,m=s.isValid,_=s.resetForm;return r.a.useEffect((function(){c&&_(c)}),[c,t,_]),r.a.createElement(y,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClose:t,isOpen:a,onSubmit:function(e){e.preventDefault(),n({name:l.name,about:l.about})},closeByEscAndOverlay:o},r.a.createElement("input",{value:l.name||"",onChange:i,type:"text",name:"name",className:"form__input form__input_type_dark",id:"name-input",placeholder:"\u0424\u0418\u041e",minLength:"2",maxLength:"40",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"name-input-error"},u.name||""),r.a.createElement("input",{value:l.about||"",onChange:i,type:"text",name:"about",className:"form__input form__input_type_dark",id:"job-input",placeholder:"\u041e \u0441\u0435\u0431\u0435",minLength:"2",maxLength:"200",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"job-input-error"},u.about||""),r.a.createElement("button",{className:"form__button form__button_type_dark ".concat(!m&&"form__button_type_dark_inactive"),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",disabled:!m},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var C=function(e){var t=e.onClose,a=e.isOpen,n=e.onUpdateAvatar,o=e.closeByEscAndOverlay,c=N(),s=c.values,l=c.handleChange,i=c.errors,u=c.isValid,m=c.resetForm;return r.a.useEffect((function(){m()}),[t,m,a]),r.a.createElement(y,{name:"edit-avatar",title:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",onClose:t,isOpen:a,onSubmit:function(e){e.preventDefault(),n({avatar:s.avatar})},closeByEscAndOverlay:o},r.a.createElement("input",{value:s.avatar||"",onChange:l,type:"url",name:"avatar",className:"form__input form__input_type_dark",id:"avatar-input",placeholder:"https://...",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"avatar-input-error"},i.avatar||""),r.a.createElement("button",{className:"form__button form__button_type_dark ".concat(!u&&"form__button_type_dark_inactive"),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",disabled:!u},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))};var j=function(e){var t=e.onClose,a=e.isOpen,n=e.onAddPlace,o=e.closeByEscAndOverlay,c=N(),s=c.values,l=c.handleChange,i=c.errors,u=c.isValid,m=c.resetForm;return r.a.useEffect((function(){m()}),[a,m]),r.a.createElement(y,{name:"place",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",onClose:t,isOpen:a,onSubmit:function(e){e.preventDefault(),n({name:s.name,link:s.link})},closeByEscAndOverlay:o},r.a.createElement("input",{value:s.name||"",onChange:l,type:"text",name:"name",className:"form__input form__input_type_dark",id:"title-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"1",maxLength:"30",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"title-input-error"},i.name||""),r.a.createElement("input",{value:s.link||"",onChange:l,type:"url",name:"link",className:"form__input form__input_type_dark",id:"img-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),r.a.createElement("span",{className:"form__span-error",id:"img-input-error"},i.link),r.a.createElement("button",{className:"form__button form__button_type_dark ".concat(!u&&"form__button_type_dark_inactive"),type:"submit","aria-label":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",disabled:!u},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"))};var S=function(e){var t=e.onClose,a=e.isOpen,n=e.onSubmit,o=e.closeByEscAndOverlay,c=r.a.useRef();return r.a.useEffect((function(){c.current.focus()})),r.a.createElement(y,{name:"delete-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",buttonText:"\u0414\u0430",closeByEscAndOverlay:o,onClose:t,isOpen:a,onSubmit:n},r.a.createElement("button",{className:"form__button form__button_type_dark",type:"submit","aria-label":"\u0414\u0430",ref:c},"\u0414\u0430"))},A=a(14),I=a(15),L=new(function(){function e(t){Object(A.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(I.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"register",value:function(e,t){return fetch("".concat(this._baseUrl,"/signup"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:e})}).then(this._handleResponse)}},{key:"authorize",value:function(e,t){return fetch("".concat(this._baseUrl,"/signin"),{method:"POST",headers:this._headers,body:JSON.stringify({password:t,email:e})}).then(this._handleResponse)}},{key:"getContent",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(this._handleResponse)}}]),e}())({baseUrl:"https://auth.nomoreparties.co",headers:{Accept:"application/json","Content-Type":"application/json"}});var U=function(e){var t=e.setIsLoggedIn,a=e.setIsInfoTooltipOpen,n=e.setHasRegistartionError,o=r.a.useState(""),c=Object(i.a)(o,2),s=c[0],l=c[1],u=Object(_.g)(),m=N(),d=m.values,f=m.handleChange,h=m.errors,b=m.isValid,E=m.resetForm;function v(){L.authorize(d.email,d.password).then((function(e){return e.token?(localStorage.setItem("token",e.token),e):void localStorage.removeItem("token")})).then((function(e){e.token?(l(""),t(!0),u.push("/")):(l("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"),a(!0),n(!0))})).catch((function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430!"),a(!0),n(!0),400===e&&l("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),401===e&&l("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 email")}))}return r.a.useEffect((function(){E()}),[E]),r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"login-page"},r.a.createElement("form",{className:"form form_type_dark form_type_full-page",onSubmit:function(e){e.preventDefault(),L.register(d.email,d.password).then((function(e){400!==e.statusCode?(l(""),a(!0),n(!1),setTimeout(v,1500)):(a(!0),n(!0),l("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"))})).catch((function(e){l("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),a(!0),n(!0)}))},noValidate:!0},r.a.createElement("h1",{className:"form__title form__title_type_light form__title_position_center"},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",{className:"form__error"},s),r.a.createElement("input",{value:d.email||"",onChange:f,type:"email",name:"email",className:"form__input form__input_type_light",placeholder:"Email",required:!0}),r.a.createElement("span",{className:"form__span-error"},h.email||""),r.a.createElement("input",{value:d.password||"",onChange:f,type:"password",name:"password",minLength:"5",maxLength:"12",className:"form__input form__input_type_light",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0}),r.a.createElement("span",{className:"form__span-error"},h.password||""),r.a.createElement("button",{className:"form__button form__button_type_light form__button_type_login ".concat(!b&&"form__button_type_light_inactive"),type:"submit","aria-label":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",disabled:!b},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"),r.a.createElement("p",{className:"form__question"},"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",r.a.createElement(p.b,{to:"/sign-in",className:"form__link"},"\u0412\u043e\u0439\u0442\u0438")))))};var B=function(e){var t=e.setIsLoggedIn,a=r.a.useState(""),n=Object(i.a)(a,2),o=n[0],c=n[1],s=N(),l=s.values,u=s.handleChange,m=s.errors,d=s.isValid,f=s.resetForm;r.a.useEffect((function(){f()}),[f]);var h=Object(_.g)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"login-page"},r.a.createElement("form",{className:"form form_type_dark form_type_full-page",onSubmit:function(e){e.preventDefault(),L.authorize(l.email,l.password).then((function(e){return e.token?(localStorage.setItem("token",e.token),e):void localStorage.removeItem("token")})).then((function(e){e.token?(c(""),t(!0),h.push("/")):c("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!")})).catch((function(e){400===e&&c("\u041d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d\u043e \u043e\u0434\u043d\u043e \u0438\u0437 \u043f\u043e\u043b\u0435\u0439"),401===e&&c("\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u0438\u043b\u0438 email")}))},noValidate:!0},r.a.createElement("h1",{className:"form__title form__title_type_light form__title_position_center"},"\u0412\u0445\u043e\u0434"),r.a.createElement("p",{className:"form__error"},o),r.a.createElement("input",{value:l.email||"",onChange:u,type:"email",name:"email",className:"form__input form__input_type_light",placeholder:"Email",required:!0}),r.a.createElement("span",{className:"form__span-error"},m.email||""),r.a.createElement("input",{value:l.password||"",onChange:u,minLength:"5",maxLength:"12",type:"password",name:"password",className:"form__input form__input_type_light",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0}),r.a.createElement("span",{className:"form__span-error"},m.password||""),r.a.createElement("button",{className:"form__button form__button_type_light form__button_type_login ".concat(!d&&"form__button_type_light_inactive"),type:"submit","aria-label":"\u0412\u043e\u0439\u0442\u0438",disabled:!d},"\u0412\u043e\u0439\u0442\u0438"),r.a.createElement("p",{className:"form__question"},"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",r.a.createElement(p.b,{to:"/sign-up",className:"form__link"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))},w=a(24),x=a.n(w),P=a(25),R=a.n(P);var T=function(e){var t=e.onClose,a=e.isOpen,n=e.closeByEscAndOverlay,o=e.hasError;return r.a.useEffect((function(){n()})),r.a.createElement("div",{className:"popup popup_form ".concat(a&&"popup_open")},r.a.createElement("div",{className:"popup__container"},r.a.createElement("button",{className:"popup__close-button popup__close-button_position_center button",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:t}),r.a.createElement("div",{className:"popup__content"},o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"popup__icon",src:x.a,alt:"\u041e\u0448\u0438\u0431\u043a\u0430"}),r.a.createElement("p",{className:"popup__message"},"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"popup__icon",src:R.a,alt:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"}),r.a.createElement("p",{className:"popup__message"},"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")))))};var D=function(e){var t=e.signOut,a=e.isOpen,n=e.loggedIn,o=r.a.useContext(d);return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("header",{className:"menu ".concat(a?"menu_active":"menu_inactive")},r.a.createElement("ul",{className:"menu__container"},r.a.createElement("li",null,r.a.createElement("h1",{className:"menu__user-info"},o&&o)),r.a.createElement("li",null,r.a.createElement("button",{onClick:t,className:"menu__link"},"\u0412\u044b\u0439\u0442\u0438")))))},F=new(function(){function e(t){Object(A.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers,this._authorization=this._headers.authorization}return Object(I.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject(e.status)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"editProfile",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"createCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"editAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"putLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-13",headers:{authorization:"64f8b885-2658-44d6-bc45-dfe390bdb5b7","Content-Type":"application/json"}}),q=a(27),z=function(e){var t=e.component,a=Object(q.a)(e,["component"]);return r.a.createElement(_.b,null,a.loggedIn?r.a.createElement(t,a):r.a.createElement(_.a,{to:"./sign-up"}))};var V=function(){var e=Object(_.h)(),t=r.a.useState(null),a=Object(i.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),u=Object(i.a)(c,2),m=u[0],p=u[1],h=r.a.useState(null),y=Object(i.a)(h,2),k=y[0],N=y[1],A=r.a.useState(!1),I=Object(i.a)(A,2),w=I[0],x=I[1],P=r.a.useState(!1),R=Object(i.a)(P,2),q=R[0],V=R[1],M=r.a.useState(!1),J=Object(i.a)(M,2),H=J[0],G=J[1],K=r.a.useState(!1),Q=Object(i.a)(K,2),W=Q[0],X=Q[1],Y=r.a.useState(!1),Z=Object(i.a)(Y,2),$=Z[0],ee=Z[1],te=r.a.useState(!1),ae=Object(i.a)(te,2),ne=ae[0],re=ae[1],oe=r.a.useState(!1),ce=Object(i.a)(oe,2),se=ce[0],le=ce[1],ie=r.a.useState(!1),ue=Object(i.a)(ie,2),me=ue[0],_e=ue[1],pe=r.a.useState(!1),de=Object(i.a)(pe,2),fe=de[0],he=de[1],be=r.a.useState({}),Ee=Object(i.a)(be,2),ve=Ee[0],ge=Ee[1],ye=r.a.useState({}),ke=Object(i.a)(ye,2),Ne=ke[0],Oe=ke[1],Ce=r.a.useState(!1),je=Object(i.a)(Ce,2),Se=je[0],Ae=je[1],Ie=Object(_.g)();function Le(){x(!1),V(!1),G(!1),X(!1),ee(!1),re(!1)}function Ue(){localStorage.removeItem("token"),Ae(!1),le(!1),_e(!1),Ie.push("/sign-in")}function Be(){function e(e){"Escape"===e.key&&Le()}function t(e){e.target.classList.contains("popup_open")&&Le()}return document.addEventListener("click",t),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}}return r.a.useEffect((function(){Promise.all([F.getUserInfo(),F.getInitialCards()]).then((function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];o(a),N(n)})).catch((function(e){return console.error("\u041f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[]),r.a.useEffect((function(){!function(){var e=localStorage.getItem("token");e&&L.getContent(e).then((function(e){e&&(p(e.data.email),Ae(!0),Ie.push("/"))})).catch((function(e){400===e&&console.error("\u0422\u043e\u043a\u0435\u043d \u043d\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u0438\u043b\u0438 \u043f\u0435\u0440\u0435\u0434\u0430\u043d \u043d\u0435 \u0432 \u0442\u043e\u043c \u0444\u043e\u0440\u043c\u0430\u0442\u0435"),401===e&&console.error("\u041f\u0435\u0440\u0435\u0434\u0430\u043d\u043d\u044b\u0439 \u0442\u043e\u043a\u0435\u043d \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d")}))}()}),[e.pathname]),r.a.createElement(b.Provider,{value:n},r.a.createElement(d.Provider,{value:m},r.a.createElement("div",{className:"page"},r.a.createElement(D,{signOut:Ue,isOpen:se,loggedIn:Se}),r.a.createElement(f,{signOut:Ue,handleMenu:function(){le(!se)},handleButtonMenu:function(){_e(!me)},isButtonMenuActive:me}),r.a.createElement(_.d,null,r.a.createElement(_.b,{path:"/sign-up"},r.a.createElement(U,{setIsLoggedIn:Ae,setIsInfoTooltipOpen:re,setHasRegistartionError:he})),r.a.createElement(_.b,{path:"/sign-in"},r.a.createElement(B,{setIsLoggedIn:Ae})),r.a.createElement(z,{path:"/",loggedIn:Se,component:E,onEditAvatar:function(){G(!0)},onEditProfile:function(){x(!0)},onAddPlace:function(){V(!0)},onCardClick:function(e,t){ge({name:e,link:t}),X(!0)},initialCards:k,onCardLike:function(e,t){function a(t){var a=k.map((function(a){return a._id===e?t:a}));N(a)}t.some((function(e){return e._id===n._id}))?F.deleteLike(e).then((function(e){a(e)})).catch((function(e){return console.error("\u041f\u0440\u0438 \u043b\u0430\u0439\u043a\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})):F.putLike(e).then((function(e){a(e)})).catch((function(e){return console.error("\u041f\u0440\u0438 \u043b\u0430\u0439\u043a\u0435 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},onCardDelete:function(e){Oe({id:e}),ee(!0)}}),r.a.createElement(_.b,null,Se?r.a.createElement(_.a,{to:"/"}):r.a.createElement(_.a,{to:"/sign-up"}))),n&&r.a.createElement(O,{isOpen:w,onClose:Le,onUpdateUser:function(e){F.editProfile(e).then((function(e){o(Object(l.a)(Object(l.a)({},n),{},{name:e.name,about:e.about})),Le()})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},closeByEscAndOverlay:Be}),n&&r.a.createElement(C,{isOpen:H,onClose:Le,onUpdateAvatar:function(e){F.editAvatar(e).then((function(e){o(Object(l.a)(Object(l.a)({},n),{},{avatar:e.avatar})),Le()})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0430\u0432\u0430\u0442\u0430\u0440\u0430 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},closeByEscAndOverlay:Be}),r.a.createElement(j,{isOpen:q,onClose:Le,onAddPlace:function(e){F.createCard(e).then((function(e){N([e].concat(Object(s.a)(k)))})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})),Le()},closeByEscAndOverlay:Be}),r.a.createElement(g,{card:ve,onClose:Le,isOpen:W,closeByEscAndOverlay:Be}),r.a.createElement(S,{closeByEscAndOverlay:Be,onClose:Le,isOpen:$,onSubmit:function(e){e.preventDefault(),F.deleteCard(Ne.id).then((function(){var e=k.filter((function(e){return e._id!==Ne.id}));N(e),Le()})).catch((function(e){return console.error("\u041f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0438 \u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),r.a.createElement(T,{onClose:Le,isOpen:ne,closeByEscAndOverlay:Be,hasError:fe}),r.a.createElement(v,null))))};c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p.a,{basename:"/react-mesto-auth"},r.a.createElement(V,null))),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.53dde82f.chunk.js.map